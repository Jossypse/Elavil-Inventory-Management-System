<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Dashboard</title>
    <link rel="stylesheet" href="css/supervisor.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <nav id="sidebar">
            <div class="sidebar-header">
                <h2>Elavil</h2>
            </div>
            <ul class="sidebar-menu">
                <li class="active">
                    <a href="supervisor.html"><i class="fas fa-boxes"></i> <span>Inventory</span></a>
                </li>
                <li>
                    <a href="requests.html"><i class="fas fa-clipboard-list"></i> <span>Requests</span></a>
                </li>
                <li>
                    <a href="return-requests.html"><i class="fas fa-undo"></i> <span>Return Requests</span></a>
                </li>
                <li>
                    <a href="users.html"><i class="fas fa-users"></i> <span>User Management</span></a>
                </li>
                <li>
                    <a href="buses.html"><i class="fas fa-bus"></i> <span>Buses</span></a>
                </li>
                <li>
                    <a href="reports.html"><i class="fas fa-chart-line"></i> <span>Reports</span></a>
                </li>
                
            </ul>
        </nav>

        <div class="main-content">
            <header>
                <h1>Inventory Dashboard</h1>
            </header>
            
            <main>
                <section id="inventory-display">
                    <div class="inventory-header">
                        <h2>Current Inventory</h2>
                        <div class="inventory-summary">
                            <div class="summary-cards">

                                <div class="summary-card" id="no-stock">
                                    <span class="summary-label">Out of Stock</span>
                                    <span class="summary-value">0</span>
                                </div>
                                <div class="summary-card" id="under-repair">
                                    <span class="summary-label">Returned</span>
                                    <span class="summary-value">0</span>
                                </div>
                                <div class="summary-card" id="ready-to-use">
                                    <span class="summary-label">Items</span>
                                    <span class="summary-value">0</span>
                                </div>
                                <div class="summary-card" id="low-stock">
                                    <span class="summary-label">Low Stock</span>
                                    <span class="summary-value">0</span>
                                </div>
                               
                                <div class="summary-card" id="under-repair-retr">
                                    <span class="summary-label">Under Repair</span>
                                    <span class="summary-value">0</span>
                                </div>
                                <div class="summary-card" id="repaired-retf">
                                    <span class="summary-label">Repaired</span>
                                    <span class="summary-value">0</span>
                                </div>
                                <div class="summary-card" id="disposed-retd">
                                    <span class="summary-label">Disposed</span>
                                    <span class="summary-value">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Tab Navigation -->
                    <div class="inventory-tabs">
                        <button class="tab-button active" data-tab="brand-new" onclick="switchInventoryTab('brand-new')">
                            <i class="fas fa-box"></i> Brand New
                        </button>
                        <button class="tab-button" data-tab="returned" onclick="switchInventoryTab('returned')">
                            <i class="fas fa-undo"></i> Returned
                        </button>
                        <button class="tab-button" data-tab="under-repair" onclick="switchInventoryTab('under-repair')">
                            <i class="fas fa-tools"></i> Under Repair
                        </button>
                        <button class="tab-button" data-tab="repaired" onclick="switchInventoryTab('repaired')">
                            <i class="fas fa-check-circle"></i> Repaired
                        </button>
                        <button class="tab-button" data-tab="disposed" onclick="switchInventoryTab('disposed')">
                            <i class="fas fa-trash-alt"></i> Disposed
                        </button>
                    </div>
                    <div class="inventory-filters">
                        <input type="text" id="search-items" placeholder="Search items...">
                        <select id="type-filter">
                            <option value="all">All Types</option>
                        </select>
                        <select id="status-filter">
                            <option value="all">All</option>
                            <option value="available">Available</option>
                            <option value="low_stock">Low Stock</option>
                            <option value="no_stock">No stock</option>
                            <option value="under_repair">Under Repair</option>
                            <option value="returned">Returned</option>
                            <option value="repaired">Repaired</option>
                            <option value="disposed">Disposed</option>
                        </select>
                        <select id="sort-filter">
                            <option value="none">Sort By</option>
                            <option value="type">Type</option>
                            <option value="brand">Brand</option>
                            <option value="manufacturer">Manufacturer</option>
                        </select>
                    </div>
                    <div class="table-container">
                        <table id="inventory-table">
                            <thead>
                                <tr>
                                     <th>No. <button class="minimize-btn" onclick="toggleColumn(1)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Brand <button class="minimize-btn" onclick="toggleColumn(2)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Manufacturer <button class="minimize-btn" onclick="toggleColumn(3)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Type <button class="minimize-btn" onclick="toggleColumn(4)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Quantity <button class="minimize-btn" onclick="toggleColumn(5)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Unit <button class="minimize-btn" onclick="toggleColumn(6)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Size <button class="minimize-btn" onclick="toggleColumn(7)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Description <button class="minimize-btn" onclick="toggleColumn(8)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Supplier Name <button class="minimize-btn" onclick="toggleColumn(9)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Contact Number <button class="minimize-btn" onclick="toggleColumn(10)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th>Status <button class="minimize-btn" onclick="toggleColumn(11)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                     <th id="remarks-header">Remarks <button class="minimize-btn" onclick="toggleColumn(12)" title="Minimize column"><i class="fas fa-minus minimize-icon"></i><i class="fas fa-plus maximize-icon" style="display:none;"></i></button></th>
                                </tr>
                            </thead>
                            <tbody id="inventory-list">
                                <!-- Inventory items will be populated here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </main>
            
            <footer>
                <p>&copy; 2025 Elavil Inventory Management System</p>
            </footer>
            
            <!-- Floating Add Inventory Button -->
            <button id="add-inventory-fab" title="Add Inventory">+</button>

            <!-- Add Inventory Modal -->
            <div id="add-inventory-modal" class="modal" style="display:none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Add Inventory</h2>
                        <span class="close-modal" id="close-add-inventory">&times;</span>
                    </div>
                    <div class="modal-body">
                        <form id="add-inventory-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="inv-brand">Brand</label>
                                    <input type="text" id="inv-brand" required>
                                </div>
                                <div class="form-group">
                                    <label for="inv-manufacturer">Manufacturer</label>
                                    <input type="text" id="inv-manufacturer" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="inv-type">Type</label>
                                    <input type="text" id="inv-type" list="inventory-types" placeholder="e.g., engine oil" required>
                                    <datalist id="inventory-types">
                                        <option value="Engine Oil">
                                        <option value="Transmission Fluid">
                                        <option value="Brake Fluid">
                                        <option value="Power Steering Fluid">
                                        <option value="Coolant">
                                        <option value="Hydraulic Oil">
                                        <option value="Gear Oil">
                                        <option value="Air Filter">
                                        <option value="Oil Filter">
                                        <option value="Fuel Filter">
                                        <option value="Cabin Filter">
                                        <option value="Spark Plug">
                                        <option value="Glow Plug">
                                        <option value="Battery">
                                        <option value="Alternator">
                                        <option value="Starter Motor">
                                        <option value="Radiator">
                                        <option value="Radiator Hose">
                                        <option value="Fan Belt">
                                        <option value="Timing Belt">
                                        <option value="Water Pump">
                                        <option value="Thermostat">
                                        <option value="Brake Pad">
                                        <option value="Brake Shoe">
                                        <option value="Brake Disc">
                                        <option value="Brake Drum">
                                        <option value="Brake Caliper">
                                        <option value="Master Cylinder">
                                        <option value="Tire">
                                        <option value="Tube">
                                        <option value="Wheel Rim">
                                        <option value="Wheel Bearing">
                                        <option value="Shock Absorber">
                                        <option value="Strut">
                                        <option value="Spring">
                                        <option value="Ball Joint">
                                        <option value="Tie Rod">
                                        <option value="Control Arm">
                                        <option value="Bushing">
                                        <option value="Headlight">
                                        <option value="Taillight">
                                        <option value="Bulb">
                                        <option value="Fuse">
                                        <option value="Relay">
                                        <option value="Wiper Blade">
                                        <option value="Windshield">
                                        <option value="Side Mirror">
                                        <option value="Door Handle">
                                        <option value="Window Regulator">
                                        <option value="Door Lock">
                                        <option value="Horn">
                                        <option value="Speedometer">
                                        <option value="Fuel Pump">
                                        <option value="Injector">
                                        <option value="Turbocharger">
                                        <option value="Intercooler">
                                        <option value="Exhaust Pipe">
                                        <option value="Muffler">
                                        <option value="Catalytic Converter">
                                        <option value="Clutch Plate">
                                        <option value="Clutch Disc">
                                        <option value="Flywheel">
                                        <option value="Gasket">
                                        <option value="Seal">
                                        <option value="O-Ring">
                                        <option value="Bolt">
                                        <option value="Nut">
                                        <option value="Washer">
                                        <option value="Grease">
                                        <option value="Lubricant">
                                        <option value="Seat">
                                        <option value="Seat Belt">
                                        <option value="Dashboard">
                                        <option value="Steering Wheel">
                                        <option value="Steering Column">
                                        <option value="Gear Shift">
                                        <option value="Handbrake">
                                        <option value="Pedal">
                                        <option value="Floor Mat">
                                        <option value="Mirror">
                                        <option value="Sun Visor">
                                        <option value="AC Compressor">
                                        <option value="AC Condenser">
                                        <option value="AC Evaporator">
                                        <option value="Refrigerant">
                                        <option value="Air Hose">
                                        <option value="Electrical Wire">
                                        <option value="Connector">
                                        <option value="Switch">
                                        <option value="Sensor">
                                        <option value="Gauge">
                                    </datalist>
                                </div>
                                <div class="form-group">
                                    <label for="inv-quantity">Quantity</label>
                                    <input type="number" id="inv-quantity" min="1" step="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="inv-restock">Threshold</label>
                                    <input type="number" id="inv-restock" min="1" step="1" placeholder="e.g., 5" required>
                                </div>
                                <div class="form-group">
                                    <label for="inv-unit">Quantity Unit</label>
                                    <select id="inv-unit" required>
                                        <option value="" disabled selected>Select unit</option>
                                        <option value="pc">pc</option>
                                        <option value="gal">gal</option>
                                        <option value="set">set</option>
                                        <option value="liters">liters</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="inv-size">Size</label>
                                    <input type="text" id="inv-size" placeholder="">
                                </div>
                                <div class="form-group">
                                    <label for="inv-description">Description</label>
                                    <input type="text" id="inv-description" placeholder="product Description">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="inv-supplier-name">Supplier Name</label>
                                    <input type="text" id="inv-supplier-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="inv-supplier-number">Contact Number</label>
                                    <input type="tel" id="inv-supplier-number" placeholder="09XXXXXXXXX" inputmode="numeric" pattern="09[0-9]{9}" maxlength="11" title="Must start with 09 and be 11 digits" required>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="primary">Save</button>
                                <button type="button" class="secondary" id="cancel-add-inventory">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Adjust Quantity Modal -->
            <div id="adjust-qty-modal" class="modal" style="display:none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="close-modal" id="close-adjust-qty">&times;</span>
                    </div>
                    <div class="modal-body">
                        <form id="adjust-qty-form">
                            <div class="form-group">
                                <label for="adjust-qty-input">Add Quantity</label>
                                <input type="number" id="adjust-qty-input" min="1" step="1" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="primary">Confirm</button>
                                <button type="button" class="secondary" id="cancel-adjust-qty">Cancel</button>
                            </div>
                        </form>
                        <p id="adjust-qty-note" style="margin-top:10px;color:#7f8c8d;"></p>
                    </div>
                </div>
            </div>

            <!-- Mark as Repaired Modal -->
            <div id="mark-repaired-modal" class="modal" style="display:none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Mark as Repaired</h2>
                        <span class="close-modal" id="close-mark-repaired">&times;</span>
                    </div>
                    <div class="modal-body">
                        <form id="mark-repaired-form">
                            <div class="form-group">
                                <label for="repaired-qty-input">Quantity to Mark as Repaired</label>
                                <input type="number" id="repaired-qty-input" min="1" step="1" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="primary">Mark as Repaired</button>
                                <button type="button" class="secondary" id="cancel-mark-repaired">Cancel</button>
                            </div>
                        </form>
                        <p id="mark-repaired-note" style="margin-top:10px;color:#7f8c8d;"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/supervisor.js"></script>

    <!-- Transaction History Modal -->
    <div id="transaction-history-modal" class="modal" style="display:none;">
        <div class="modal-content" style="max-width:700px;">
            <div class="modal-header">
                <h2>Transaction History</h2>
                <span class="close-modal" id="close-transaction-history">&times;</span>
            </div>
            <div class="modal-body">
                <div id="transaction-history-loading" style="text-align:center; padding:2rem;">
                    <i class="fas fa-spinner fa-spin" style="font-size:2rem; color:#3498db;"></i>
                    <p style="margin-top:1rem; color:#7f8c8d;">Loading history...</p>
                </div>
                <div id="transaction-history-content" style="display:none;">
                    <div id="transaction-history-list" style="max-height:400px; overflow-y:auto;">
                        <!-- Transaction items will be populated here -->
                    </div>
                </div>
                <div id="transaction-history-empty" style="display:none; text-align:center; padding:2rem; color:#7f8c8d;">
                    <i class="fas fa-history" style="font-size:3rem; margin-bottom:1rem; opacity:0.5;"></i>
                    <p>No transaction history found for this item.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="modal" style="display:none;">
        <div class="modal-content" style="max-width:420px;">
            <div class="modal-header">
                <h2>Confirm Action</h2>
                <span class="close-modal" id="confirm-close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="confirm-message" style="margin:0 0 1rem 0;">
                    Are you sure?
                </p>
                <div class="action-buttons" style="justify-content:center; gap:0.75rem; border-top:none; padding-top:0;">
                    <button id="confirm-yes" class="success-button">Confirm</button>
                    <button id="confirm-no" class="danger-button">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 